{"version":3,"sources":["assets/images/pages sync /^/.*$","assets/images/pages/error-dark.svg","assets/images/pages/error.svg","assets/images/pages/forgot-password-v2-dark.svg","assets/images/pages/forgot-password-v2.svg","assets/images/pages/login-v2-dark.svg","assets/images/pages/login-v2.svg","assets/images/pages/not-authorized-dark.svg","assets/images/pages/not-authorized.svg","assets/images/pages/register-v2-dark.svg","assets/images/pages/register-v2.svg","components/SignInButton/index.jsx","views/auth/login/index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","SignInButton","instance","useMsal","className","color","onClick","loginType","loginPopup","loginRequest","console","log","loginRedirect","catch","Login","skin","useSkin","illustration","useNavigate","source","require","default","isAuthenticated","useIsAuthenticated","accounts","request","account","useEffect","acquireTokenSilent","then","res","dados","email","username","token","accessToken","httpRequest","method","body","r","setToken","access_token","setData","expires_in","Usuarios","getUser","window","location","href","error","logoutRedirect","lg","sm","src","alt","md","tag","logo","width"],"mappings":"sIAAA,IAAIA,EAAM,CACT,mBAAoB,IACpB,cAAe,IACf,gCAAiC,IACjC,2BAA4B,IAC5B,sBAAuB,IACvB,iBAAkB,IAClB,4BAA6B,IAC7B,uBAAwB,IACxB,yBAA0B,IAC1B,oBAAqB,KAItB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,iCC/BpB,OAAe,cAA0B,wC,iCCAzC,OAAe,cAA0B,mC,iCCAzC,OAAe,cAA0B,qD,iCCAzC,OAAe,cAA0B,gD,iCCAzC,OAAe,cAA0B,2C,iCCAzC,OAAe,cAA0B,sC,iCCAzC,OAAe,cAA0B,iD,iCCAzC,OAAe,cAA0B,4C,iCCAzC,OAAe,cAA0B,8C,iCCAzC,OAAe,cAA0B,yC,2ICS5BY,EAAe,WAC1B,IAAQC,EAAaC,cAAbD,SAYR,OACE,cAAC,IAAD,CACEE,UAAU,aACVC,MAAM,UACNC,QAAS,WAdO,IAACC,EAED,WAFCA,EAcU,YAXzBL,EAASM,WAAWC,KACC,aAAdF,IACPG,QAAQC,IAAI,QACZT,EAASU,cAAcH,KAAcI,OAAM,SAAApB,GAAC,OAAIiB,QAAQC,IAAIlB,QAKhE,mBAIM,kB,mCCsEKqB,UA7ED,WACZ,IAAQC,EAASC,cAATD,KAEFE,GADSC,cACe,SAATH,EAAkB,oBAAsB,gBAC3DI,EAASC,OAAQ,YAA4BH,IAAgBI,QAEzDC,EAAkBC,cAExB,EAA+BpB,cAAvBD,EAAR,EAAQA,SAAUsB,EAAlB,EAAkBA,SAEZC,EAAO,2BACRhB,KADQ,IAEXiB,QAASF,EAAS,KAoCpB,OAjCAG,qBAAU,WACJL,GACFpB,EACG0B,mBAAmBH,GACnBI,MAAK,SAACC,GACL,IAAMC,EAAQ,CACZC,MAAOF,EAAIJ,QAAQO,SACnBC,MAAOJ,EAAIK,aAEbC,YAAY,iBAAkB,CAC5BC,OAAQ,OACRC,KAAMP,IAELF,MAAK,SAACU,GACLC,YAASD,EAAED,KAAKG,cAChBC,YAAQH,EAAED,KAAKK,YACfC,IAASC,UACTC,OAAOC,SAASC,KAAO,QAExBnC,OAAM,SAACoC,GACN/C,EAASgD,iBAAiBrC,OAAM,SAACoC,GAC/BvC,QAAQuC,MAAMA,YAIrBpC,OAAM,SAACoC,GACN/C,EAASgD,iBAAiBrC,OAAM,SAACpB,GAC/BiB,QAAQuC,MAAMxD,WAIrB,CAAC6B,IAGF,qBAAKlB,UAAU,0BAAf,SACE,eAAC,IAAD,CAAKA,UAAU,iBAAf,UACE,cAAC,IAAD,CAAKA,UAAU,0CAA0C+C,GAAG,IAAIC,GAAG,KAAnE,SACE,qBAAKhD,UAAU,iEAAf,SACE,qBAAKA,UAAU,YAAYiD,IAAKlC,EAAQmC,IAAI,oBAGhD,cAAC,IAAD,CACElD,UAAU,gDACV+C,GAAG,IACHC,GAAG,KAHL,SAKE,eAAC,IAAD,CAAKhD,UAAU,kBAAkBgD,GAAG,IAAIG,GAAG,IAAIJ,GAAG,KAAlD,UACE,eAAC,IAAD,CAAWK,IAAI,KAAKpD,UAAU,eAA9B,UACE,qBAAKA,UAAU,OAAOiD,IAAKI,UAAMC,MAAM,OADzC,eAIA,cAAC,IAAD,UACE,cAAC,EAAD,MAEF,cAAC,IAAD","file":"static/js/43.e2731175.chunk.js","sourcesContent":["var map = {\n\t\"./error-dark.svg\": 281,\n\t\"./error.svg\": 282,\n\t\"./forgot-password-v2-dark.svg\": 283,\n\t\"./forgot-password-v2.svg\": 284,\n\t\"./login-v2-dark.svg\": 285,\n\t\"./login-v2.svg\": 286,\n\t\"./not-authorized-dark.svg\": 287,\n\t\"./not-authorized.svg\": 288,\n\t\"./register-v2-dark.svg\": 289,\n\t\"./register-v2.svg\": 290\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 280;","export default __webpack_public_path__ + \"static/media/error-dark.6de97f7b.svg\";","export default __webpack_public_path__ + \"static/media/error.51731f25.svg\";","export default __webpack_public_path__ + \"static/media/forgot-password-v2-dark.593b4f61.svg\";","export default __webpack_public_path__ + \"static/media/forgot-password-v2.490e62f0.svg\";","export default __webpack_public_path__ + \"static/media/login-v2-dark.5b83e8c4.svg\";","export default __webpack_public_path__ + \"static/media/login-v2.2198399d.svg\";","export default __webpack_public_path__ + \"static/media/not-authorized-dark.c7c1ece5.svg\";","export default __webpack_public_path__ + \"static/media/not-authorized.e62938f3.svg\";","export default __webpack_public_path__ + \"static/media/register-v2-dark.7685db34.svg\";","export default __webpack_public_path__ + \"static/media/register-v2.4620a1e5.svg\";","import React from \"react\";\r\n\r\nimport { useMsal } from \"@azure/msal-react\";\r\nimport { loginRequest } from \"../../configs/authConfig\";\r\nimport { Button } from \"reactstrap\";\r\n\r\n/**\r\n * Renders a button which, when selected, will redirect the page to the login prompt\r\n */\r\nexport const SignInButton = () => {\r\n  const { instance } = useMsal();\r\n\r\n  const handleLogin = (loginType) => {\r\n\r\n    if (loginType === \"popup\") {\r\n        instance.loginPopup(loginRequest);\r\n    } else if (loginType === \"redirect\") {\r\n        console.log(\"aqui\")\r\n        instance.loginRedirect(loginRequest).catch(e => console.log(e));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      className=\"mt-2 w-100\"\r\n      color=\"primary\"\r\n      onClick={() => handleLogin(\"redirect\")}\r\n      key=\"loginRedirect\"\r\n    >\r\n      Entrar\r\n    </Button>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { useSkin } from \"@hooks/useSkin\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Row, Col, CardTitle } from \"reactstrap\";\r\nimport \"@styles/react/pages/page-authentication.scss\";\r\n\r\nimport {\r\n  AuthenticatedTemplate,\r\n  UnauthenticatedTemplate,\r\n  useIsAuthenticated,\r\n  useMsal,\r\n} from \"@azure/msal-react\";\r\nimport { loginRequest } from \"../../../configs/authConfig\";\r\nimport { SignInButton } from \"../../../components/SignInButton\";\r\nimport { httpRequest } from \"../../../services/Api\";\r\nimport { setToken, setData } from \"../../../services/Auth\";\r\nimport Usuarios from \"../../../services/Usuarios\";\r\n\r\nimport logo from \"../../../assets/images/logo/logo.png\";\r\n\r\nconst Login = () => {\r\n  const { skin } = useSkin();\r\n  let navigate = useNavigate();\r\n  const illustration = skin === \"dark\" ? \"login-v2-dark.svg\" : \"login-v2.svg\",\r\n    source = require(`@src/assets/images/pages/${illustration}`).default;\r\n\r\n  const isAuthenticated = useIsAuthenticated();\r\n\r\n  const { instance, accounts } = useMsal();\r\n\r\n  const request = {\r\n    ...loginRequest,\r\n    account: accounts[0],\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      instance\r\n        .acquireTokenSilent(request)\r\n        .then((res) => {\r\n          const dados = {\r\n            email: res.account.username,\r\n            token: res.accessToken,\r\n          };\r\n          httpRequest(`usuarios/login`, {\r\n            method: \"POST\",\r\n            body: dados,\r\n          })\r\n            .then((r) => {\r\n              setToken(r.body.access_token);\r\n              setData(r.body.expires_in);\r\n              Usuarios.getUser();\r\n              window.location.href = \"./\";\r\n            })\r\n            .catch((error) => {\r\n              instance.logoutRedirect().catch((error) => {\r\n                console.error(error);\r\n              });\r\n            });\r\n        })\r\n        .catch((error) => {\r\n          instance.logoutRedirect().catch((e) => {\r\n            console.error(e);\r\n          });\r\n        });\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  return (\r\n    <div className=\"auth-wrapper auth-cover\">\r\n      <Row className=\"auth-inner m-0\">\r\n        <Col className=\"d-none d-lg-flex align-items-center p-5\" lg=\"8\" sm=\"12\">\r\n          <div className=\"w-100 d-lg-flex align-items-center justify-content-center px-5\">\r\n            <img className=\"img-fluid\" src={source} alt=\"Login Cover\" />\r\n          </div>\r\n        </Col>\r\n        <Col\r\n          className=\"d-flex align-items-center auth-bg px-2 p-lg-5\"\r\n          lg=\"4\"\r\n          sm=\"12\"\r\n        >\r\n          <Col className=\"px-xl-2 mx-auto\" sm=\"8\" md=\"6\" lg=\"12\">\r\n            <CardTitle tag=\"h2\" className=\"fw-bold mb-1\">\r\n              <img className=\"me-1\" src={logo} width=\"32\" />\r\n              Trade DOC\r\n            </CardTitle>\r\n            <UnauthenticatedTemplate>\r\n              <SignInButton />\r\n            </UnauthenticatedTemplate>\r\n            <AuthenticatedTemplate>Carregando...</AuthenticatedTemplate>\r\n          </Col>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}