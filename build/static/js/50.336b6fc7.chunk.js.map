{"version":3,"sources":["views/download/index.jsx","components/isAzure/index.jsx"],"names":["MySwal","withReactContent","Swal","Download","isAzure","Usuarios","getUserStorage","isAuthenticated","useIsAuthenticated","_useState","useState","_useState2","_slicedToArray","funcionarios","setFuncionarios","_useState3","_useState4","empresas","setEmpresas","_useState5","_useState6","erro","setErro","id","useParams","email","httpRequest","concat","method","token","getToken","then","res","body","fire","title","html","icon","showCancelButton","confirmButtonText","cancelButtonText","customClass","confirmButton","cancelButton","buttonsStyling","allowOutsideClick","allowEscapeKey","result","isConfirmed","envio_execucao_id","envio_execucao_email","catch","e","showConfirmButton","useEffect","empresa","error","response","data","_jsx","className","children","Fragment","Row","Col","sm","Card","CardBody","_jsxs","xl","md","CardTitle","tag","src","logo","width","map","index","nome","Documentos","doc","position","Documentos_Tipo","href","BASE_URL","arquivo","target","razao_social","jwt","require","navigate","useNavigate","verify"],"mappings":"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","file":"static/js/50.336b6fc7.chunk.js","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\r\nimport { Card, CardBody, CardTitle, Row, Col } from \"reactstrap\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\nconst MySwal = withReactContent(Swal);\r\n\r\nimport { httpRequest, BASE_URL } from \"../../services/Api\";\r\n\r\nimport logo from \"../../assets/images/logo/logo.png\";\r\nimport isAzure from \"../../components/isAzure\";\r\nimport { useIsAuthenticated } from \"@azure/msal-react\";\r\nimport { getToken } from \"../../services/Auth\";\r\nimport Usuarios from \"../../services/Usuarios\";\r\n\r\nconst Download = () => {\r\n\r\n  isAzure();\r\n  const usuarios = Usuarios.getUserStorage();\r\n  const isAuthenticated = useIsAuthenticated();\r\n\r\n  const [funcionarios, setFuncionarios] = useState(null);\r\n  const [empresas, setEmpresas] = useState(null);\r\n  const [erro, setErro] = useState(null);\r\n\r\n  let { id } = useParams();\r\n  let { email } = useParams();\r\n\r\n  if(isAuthenticated){\r\n    \r\n    httpRequest(`logs/politicas/${id}/${email}`, {\r\n      method: \"GET\",\r\n      token: getToken(),\r\n    }).then((res) => {\r\n      if(res.body === \"\"){\r\n        MySwal.fire({\r\n          title: \"Política de Confidencialidade\",\r\n          html: \"<p class='text-start'>Este acesso, incluindo os seus anexos, é dirigido exclusivamente ao destinatário, com propósito específico, e, pode conter dados pessoais, informações confidenciais e legalmente protegidas. Se você não for destinatário deste acesso, desde já fica notificado de abster-se a divulgar, copiar, distribuir, examinar ou, de qualquer forma, utilizar a informação contida nesta mensagem, por ser ilegal e não ter autorização para tais atos. Se você a recebeu por engano, avise imediatamente o remetente e apague-a. Caso seja o destinatário, ressaltamos que as informações ou dados pessoais aqui transacionados devem ser tratados com respeito à privacidade e fundamentos previstos na Lei nº 13.709/2018 – Lei Geral de Proteção de Dados Pessoais (LGPD) e demais legislações aplicáveis.<br /><br />Neste acesso, declaro ciência e concordância as condições do termo de confidencialidade do site, <a href='https://app-bioseta.azurewebsites.net/api/v1/file/politicas-de-privacidade' target='_blank'>saiba mais.</a></p>\",\r\n          icon: \"warning\",\r\n          showCancelButton: false,\r\n          confirmButtonText: \"Sim, entendido!\",\r\n          cancelButtonText: \"Cancelar\",\r\n          customClass: {\r\n            confirmButton: \"btn btn-primary\",\r\n            cancelButton: \"btn btn-danger ms-1\",\r\n          },\r\n          buttonsStyling: false,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n        }).then((result) => {\r\n          if (result.isConfirmed) {\r\n            httpRequest(`logs/politicas`, {\r\n              method: \"POST\",\r\n              body: {\r\n                envio_execucao_id: id,\r\n                envio_execucao_email: email\r\n              },\r\n              token: getToken(),\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }).catch(e => {\r\n      MySwal.fire({\r\n        title: \"Política de Confidencialidade\",\r\n        html: \"<p class='text-start'>Você está acessando de forma inválida!</p>\",\r\n        icon: \"warning\",\r\n        showCancelButton: false,\r\n        buttonsStyling: false,\r\n        allowOutsideClick: false,\r\n        allowEscapeKey: false,\r\n        showConfirmButton: false\r\n      })\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    httpRequest(`envios/arquivos/${id}`, {\r\n      method: \"GET\",\r\n    })\r\n      .then((res) => {\r\n        setFuncionarios(res.body.funcionarios);\r\n        setEmpresas(res.body.empresa);\r\n      })\r\n      .catch((error) => {\r\n        setErro(error.response.data);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"auth-wrapper auth-cover\">\r\n      <div className=\"container\">\r\n        <Fragment>\r\n          <Row>\r\n            <Col sm=\"12\">\r\n              <Card>\r\n                <CardBody>\r\n                  <Row>\r\n                    <Col className={`mb-1`} xl=\"12\" md=\"12\" sm=\"12\">\r\n                      <div className=\"pt-2\">\r\n                        <CardTitle\r\n                          tag=\"h1\"\r\n                          className=\"fw-bold mb-1 text-center\"\r\n                        >\r\n                          <img className=\"me-1\" src={logo} width=\"40\" />\r\n                          Trade DOC\r\n                        </CardTitle>\r\n                      </div>\r\n                      <div>\r\n                        <div className={`pt-5 ${erro != null ? \"\" : \"d-none\"}`}>\r\n                          <CardTitle className=\"text-center\" tag=\"h2\">\r\n                            Link expirado! <br />\r\n                            Solicite um novo envio.\r\n                          </CardTitle>\r\n                        </div>\r\n                        <div\r\n                          className={`pt-5 ${\r\n                            funcionarios != null ? \"\" : \"d-none\"\r\n                          }`}\r\n                        >\r\n                          <h3 className=\"mb-2 mt-2 text-center\">\r\n                            Documentos funcionários\r\n                          </h3>\r\n                          <div className=\"AjusteTabela\">\r\n                            <table className=\"table\">\r\n                              <thead>\r\n                                <tr>\r\n                                  <th width=\"33%\">Nome</th>\r\n                                  <th width=\"33%\">Tipo de documentos</th>\r\n                                  <th width=\"33%\" className=\"text-end\"></th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                {funcionarios !== null\r\n                                  ? funcionarios.map((result, index) => (\r\n                                      <tr key={index}>\r\n                                        <td>{result.nome}</td>\r\n                                        <td>\r\n                                          {result.Documentos.map(\r\n                                            (doc, position) => (\r\n                                              <div className=\"w-100\">\r\n                                                <div\r\n                                                  key={position}\r\n                                                  className=\"btn\"\r\n                                                >\r\n                                                  {doc.Documentos_Tipo.nome}\r\n                                                </div>\r\n                                              </div>\r\n                                            )\r\n                                          )}\r\n                                        </td>\r\n                                        <td className=\"text-end\">\r\n                                          {result.Documentos.map(\r\n                                            (doc, position) => (\r\n                                              <div className=\"my-1 w-100\">\r\n                                                <a\r\n                                                  className=\"btn btn-primary\"\r\n                                                  href={`${BASE_URL}envios/arquivos/${id}/${doc.arquivo}`}\r\n                                                  key={position}\r\n                                                  target=\"_blank\"\r\n                                                >\r\n                                                  Baixar\r\n                                                </a>\r\n                                              </div>\r\n                                            )\r\n                                          )}\r\n                                        </td>\r\n                                      </tr>\r\n                                    ))\r\n                                  : \"\"}\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                        <div\r\n                          className={`pt-5 ${empresas != null ? \"\" : \"d-none\"}`}\r\n                        >\r\n                          <h3 className=\"mb-2 mt-2 text-center\">\r\n                            Documentos empresa\r\n                          </h3>\r\n                          <div className=\"AjusteTabela\">\r\n                            <table className=\"table\">\r\n                              <thead>\r\n                                <tr>\r\n                                  <th width=\"33%\">Empresa</th>\r\n                                  <th width=\"33%\">Tipo de documentos</th>\r\n                                  <th width=\"33%\" className=\"text-end\"></th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                <tr>\r\n                                  <td>\r\n                                    {empresas !== null\r\n                                      ? empresas.razao_social\r\n                                      : \"\"}\r\n                                  </td>\r\n                                  <td>\r\n                                    {empresas !== null\r\n                                      ? empresas.Documentos.map(\r\n                                          (doc, position) => (\r\n                                            <div className=\"w-100\">\r\n                                              <div\r\n                                                key={position}\r\n                                                className=\"btn w-100 text-start\"\r\n                                              >\r\n                                                {doc.Documentos_Tipo.nome}\r\n                                              </div>\r\n                                            </div>\r\n                                          )\r\n                                        )\r\n                                      : \"\"}\r\n                                  </td>\r\n                                  <td className=\"text-end\">\r\n                                    {empresas !== null\r\n                                      ? empresas.Documentos.map(\r\n                                          (doc, position) => (\r\n                                            <div className=\"my-1 w-100\">\r\n                                              <a\r\n                                                className=\"btn btn-primary\"\r\n                                                href={`${BASE_URL}envios/arquivos/${id}/${doc.arquivo}`}\r\n                                                key={position}\r\n                                                target=\"_blank\"\r\n                                              >\r\n                                                Baixar\r\n                                              </a>\r\n                                            </div>\r\n                                          )\r\n                                        )\r\n                                      : \"\"}\r\n                                  </td>\r\n                                </tr>\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </Col>\r\n                  </Row>\r\n                </CardBody>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </Fragment>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Download;\r\n","import { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useIsAuthenticated } from \"@azure/msal-react\";\r\nconst jwt = require(\"jsonwebtoken\");\r\n\r\nimport { getToken } from \"../../services/Auth\";\r\n\r\nconst isAzure = () => {\r\n  let navigate = useNavigate();\r\n  const isAuthenticated = useIsAuthenticated();\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate(\"/login\");\r\n    }else{\r\n      const payload = jwt.verify(getToken(), \"aIebX2X9oCZE1gCNFlE0lSxPAKVqJfL7+8WUcMVcz677+V6JnRomzKfg03EIR6VlSAf2kWQSiiTDP8MF3Js7is9i7+YdCPTw+sifbuNeeCZWLr1QJCrGaRacvD4qKzzpXNkNeKhDv0h6rQW/JJ8dX94rK5esVxtbupCptX8HzfL8rmUSLI/l78ddYfkb+RkuHH5PY8TYpdUBv1h3qUYo4L62QUX/Ze5wqhYUuhPvmOAYIoz7j4SABxT2JciOn9Wy1wraZ268VzhgLilykQBH5QC6lbNyfIegB79R0QYQrYk5IL1gfmxY2lKIDeCYB9p8NIF8qfCyD/RJMQOUEv9z9A==\");\r\n      if(!payload) {\r\n        navigate(\"/login\");\r\n      }\r\n    }\r\n  }, [isAuthenticated]);\r\n}\r\n\r\nexport default isAzure;"],"sourceRoot":""}